# Usage
# make
# make clean

CC = g++
CFLAGS = -g -Wall
MKLROOT = /opt/intel/compilers_and_libraries_2018.2.199/linux/mkl
MKLFLAGS = -fopenmp -m64 -I${MKLROOT}/include -Wl,--no-as-needed -L${MKLROOT}/lib/intel64 -lmkl_intel_lp64 -lmkl_core -lmkl_gnu_thread -lpthread -lm -ldl


SRCS = main.cpp activation.cpp probability.cpp fc_mkl.cpp
OBJS = $(SRCS:.cpp=.o)
FILE = yourcode.out

all:$(FILE) # here the yourcode executable is made
$(FILE): $(OBJS)
	$(CC) $(CFLAGS) -o $(FILE) $(OBJS) -pthread $(MKLFLAGS)

main.o: main.cpp
	$(CC) $(CFLAGS) -c main.cpp

activation.o: activation.cpp
	$(CC) $(CFLAGS) -c activation.cpp

probability.o: probability.cpp
	$(CC) $(CFLAGS) -c probability.cpp

fc_mkl.o:fc_mkl.cpp
	$(CC) $(CFLAGS) -c fc_mkl.cpp $(MKLFLAGS)

clean:
	rm $(FILE) $(OBJS)